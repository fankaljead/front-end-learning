<!DOCTYPE html5>
<html>
  <head>
    <meta charset="utf-8" />
    <title>实现千分位转换</title>
    <style>
      .input {
        width: 200px;
      }
    </style>
  </head>
  <body class="body">
    <input class="input" id="input" />
    <script>
      function format_with_regex(val) {
        var reg = /\d{1,3}(?=(\d{3})+$)/g;
        return (val + "").replace(reg, "$&,");
      }

      const input = document.getElementById("input");
      input.addEventListener("change", function (e) {
        const value = e.target.value.replaceAll(",", "");
        input.value = format_with_regex(value);
      });
    </script>
  </body>
</html>
